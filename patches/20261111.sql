LOCK TABLES `appbuilder_definition` WRITE;

INSERT INTO `appbuilder_definition` (`id`, `name`, `type`, `json`, `createdAt`, `updatedAt`)
VALUES
    ('8a20528a-e472-4e80-911a-b14285425caf','SitePlugins','object','{\"id\":\"8a20528a-e472-4e80-911a-b14285425caf\",\"type\":\"object\",\"name\":\"SitePlugins\",\"labelFormat\":\"{886a68ca-2b97-4f90-9ebf-4efd7f73dad5}\",\"labelSettings\":{\"isNoLabelDisplay\":0},\"isImported\":0,\"isExternal\":0,\"tableName\":\"SITE_PLUGIN\",\"primaryColumnName\":\"uuid\",\"transColumnName\":\"\",\"urlPath\":\"\",\"objectWorkspace\":{\"sortFields\":[],\"filterConditions\":[],\"frozenColumnID\":\"\",\"hiddenFields\":[]},\"isSystemObject\":1,\"translations\":[{\"language_code\":\"en\",\"label\":\"SitePlugins\"}],\"fieldIDs\":[\"886a68ca-2b97-4f90-9ebf-4efd7f73dad5\",\"54212e74-7e57-4d6b-9d78-5e958a129697\",\"b5cb8b98-34c1-4dd3-a43c-335106828c98\",\"e5e111df-a082-40bc-bc55-f2277892169c\",\"86f267b8-1d2e-4edc-a186-350e9c0bc27d\",\"f8684a6c-3128-4449-b6a2-0e644a2b41d8\",\"ce5874bd-bbe5-417c-b040-3a45c7549e0c\"],\"importedFieldIDs\":[],\"indexIDs\":[],\"createdInAppID\":\"227bcbb3-437f-4bb5-a5a1-ec3198696206\"}','2025-11-06 08:40:06','2025-11-08 08:35:07'),
    ('886a68ca-2b97-4f90-9ebf-4efd7f73dad5','SitePlugins->Name','field','{\"id\":\"886a68ca-2b97-4f90-9ebf-4efd7f73dad5\",\"type\":\"field\",\"key\":\"string\",\"icon\":\"font\",\"isImported\":0,\"columnName\":\"Name\",\"settings\":{\"showIcon\":1,\"required\":0,\"unique\":0,\"validationRules\":\"[]\",\"default\":\"\",\"maxLength\":\"\",\"supportMultilingual\":1,\"width\":100,\"translations\":[{\"language_code\":\"en\",\"default\":\"\"}]},\"translations\":[{\"language_code\":\"en\",\"label\":\"Name\"}]}','2025-11-06 08:41:40','2025-11-06 08:41:40'),
    ('54212e74-7e57-4d6b-9d78-5e958a129697','SitePlugins->Description','field','{\"id\":\"54212e74-7e57-4d6b-9d78-5e958a129697\",\"type\":\"field\",\"key\":\"LongText\",\"icon\":\"align-right\",\"isImported\":0,\"columnName\":\"Description\",\"settings\":{\"showIcon\":1,\"required\":0,\"unique\":0,\"validationRules\":\"[]\",\"default\":\"\",\"maxLength\":255,\"supportMultilingual\":1,\"width\":150,\"translations\":[{\"language_code\":\"en\",\"default\":\"\"}]},\"translations\":[{\"language_code\":\"en\",\"label\":\"Description\"}]}','2025-11-06 08:42:14','2025-11-06 08:42:14'),
    ('b5cb8b98-34c1-4dd3-a43c-335106828c98','SitePlugins->url','field','{\"id\":\"b5cb8b98-34c1-4dd3-a43c-335106828c98\",\"type\":\"field\",\"key\":\"string\",\"icon\":\"font\",\"isImported\":0,\"columnName\":\"url\",\"settings\":{\"showIcon\":1,\"required\":0,\"unique\":0,\"validationRules\":\"[{\\\"invalidMessage\\\":\\\"\\\",\\\"rules\\\":{\\\"glue\\\":\\\"and\\\"}}]\",\"default\":\"\",\"maxLength\":\"\",\"supportMultilingual\":0,\"width\":100},\"translations\":[{\"language_code\":\"en\",\"label\":\"url\"}]}','2025-11-06 08:45:40','2025-11-06 08:45:40'),
    ('e5e111df-a082-40bc-bc55-f2277892169c','SitePlugins->enabled','field','{\"id\":\"e5e111df-a082-40bc-bc55-f2277892169c\",\"type\":\"field\",\"key\":\"boolean\",\"icon\":\"check-square-o\",\"isImported\":0,\"columnName\":\"enabled\",\"settings\":{\"showIcon\":1,\"required\":0,\"unique\":0,\"validationRules\":\"[]\",\"default\":0,\"width\":110},\"translations\":[{\"language_code\":\"en\",\"label\":\"enabled\"}]}','2025-11-06 08:45:59','2025-11-06 08:45:59'),
    ('86f267b8-1d2e-4edc-a186-350e9c0bc27d','SitePlugins->icon','field','{\"id\":\"86f267b8-1d2e-4edc-a186-350e9c0bc27d\",\"type\":\"field\",\"key\":\"string\",\"icon\":\"font\",\"isImported\":0,\"columnName\":\"icon\",\"settings\":{\"showIcon\":1,\"required\":0,\"unique\":0,\"validationRules\":\"[]\",\"default\":\"\",\"maxLength\":\"\",\"supportMultilingual\":0,\"width\":100},\"translations\":[{\"language_code\":\"en\",\"label\":\"icon\"}]}','2025-11-06 09:37:17','2025-11-06 09:37:17'),
    ('f8684a6c-3128-4449-b6a2-0e644a2b41d8','SitePlugins->SitePluginLinks','field','{\"id\":\"f8684a6c-3128-4449-b6a2-0e644a2b41d8\",\"type\":\"field\",\"key\":\"connectObject\",\"icon\":\"external-link\",\"isImported\":0,\"columnName\":\"plugin\",\"settings\":{\"showIcon\":1,\"linkObject\":\"7ff322ff-3434-4611-9fd1-4d2996414c1a\",\"linkType\":\"many\",\"linkViaType\":\"one\",\"isCustomFK\":0,\"indexField\":\"\",\"indexField2\":\"\",\"isSource\":0,\"width\":100,\"required\":0,\"unique\":0,\"linkColumn\":\"04637599-6e83-4f97-8179-3ed94fb18bdf\"},\"translations\":[{\"language_code\":\"en\",\"label\":\"SitePluginLinks\"}]}','2025-11-06 09:25:24','2025-11-06 09:25:24'),
    ('ce5874bd-bbe5-417c-b040-3a45c7549e0c','SitePlugins->version','field','{\"id\":\"ce5874bd-bbe5-417c-b040-3a45c7549e0c\",\"type\":\"field\",\"key\":\"string\",\"icon\":\"font\",\"isImported\":0,\"columnName\":\"version\",\"settings\":{\"showIcon\":1,\"required\":0,\"unique\":0,\"validationRules\":\"[]\",\"default\":\"\",\"maxLength\":\"\",\"supportMultilingual\":0,\"width\":110},\"translations\":[{\"language_code\":\"en\",\"label\":\"version\"}]}','2025-11-08 08:35:06','2025-11-08 08:35:06'),
    ('7ff322ff-3434-4611-9fd1-4d2996414c1a','SitePluginLinks','object','{\"id\":\"7ff322ff-3434-4611-9fd1-4d2996414c1a\",\"type\":\"object\",\"name\":\"SitePluginLinks\",\"labelFormat\":\"{8c0aa469-74b4-4347-9c4b-9e843cd77dee}-{e19755a9-1add-476f-8e0c-b0db383bb01b}\",\"labelSettings\":{\"isNoLabelDisplay\":0},\"isImported\":0,\"isExternal\":0,\"tableName\":\"SITE_PLUGIN_LINK\",\"primaryColumnName\":\"uuid\",\"transColumnName\":\"\",\"urlPath\":\"\",\"objectWorkspace\":{\"sortFields\":[],\"filterConditions\":[],\"frozenColumnID\":\"\",\"hiddenFields\":[]},\"isSystemObject\":1,\"translations\":[{\"language_code\":\"en\",\"label\":\"SitePluginLinks\"}],\"fieldIDs\":[\"8c0aa469-74b4-4347-9c4b-9e843cd77dee\",\"e19755a9-1add-476f-8e0c-b0db383bb01b\",\"10ca342d-db55-482d-9c4a-91f3e6a0c37c\",\"04637599-6e83-4f97-8179-3ed94fb18bdf\"],\"importedFieldIDs\":[],\"indexIDs\":[],\"createdInAppID\":\"227bcbb3-437f-4bb5-a5a1-ec3198696206\"}','2025-11-06 08:49:54','2025-11-06 09:26:56'),
    ('8c0aa469-74b4-4347-9c4b-9e843cd77dee','SitePluginLinks->platform','field','{\"id\":\"8c0aa469-74b4-4347-9c4b-9e843cd77dee\",\"type\":\"field\",\"key\":\"list\",\"icon\":\"th-list\",\"isImported\":0,\"columnName\":\"platform\",\"settings\":{\"showIcon\":1,\"required\":0,\"unique\":0,\"validationRules\":\"[]\",\"isMultiple\":0,\"hasColors\":0,\"default\":\"\",\"multipleDefault\":[],\"options\":[{\"id\":\"service\",\"text\":\"service\",\"hex\":\"#F44336\",\"translations\":[{\"language_code\":\"en\",\"text\":\"service\"}]},{\"id\":\"web\",\"text\":\"web\",\"hex\":\"#E91E63\",\"translations\":[{\"language_code\":\"en\",\"text\":\"web\"}]},{\"id\":\"pwa\",\"text\":\"pwa\",\"hex\":\"#9C27B0\",\"translations\":[{\"language_code\":\"en\",\"text\":\"pwa\"}]}],\"width\":120},\"translations\":[{\"language_code\":\"en\",\"label\":\"platform\"}]}','2025-11-06 08:51:31','2025-11-06 08:51:31'),
    ('04637599-6e83-4f97-8179-3ed94fb18bdf','SitePluginLinks->plugin','field','{\"id\":\"04637599-6e83-4f97-8179-3ed94fb18bdf\",\"type\":\"field\",\"key\":\"connectObject\",\"icon\":\"external-link\",\"isImported\":0,\"columnName\":\"plugin\",\"settings\":{\"showIcon\":1,\"required\":0,\"unique\":0,\"validationRules\":\"[]\",\"linkObject\":\"8a20528a-e472-4e80-911a-b14285425caf\",\"linkType\":\"one\",\"linkViaType\":\"many\",\"linkColumn\":\"f8684a6c-3128-4449-b6a2-0e644a2b41d8\",\"isSource\":1,\"isCustomFK\":0,\"indexField\":\"\",\"indexField2\":\"\",\"netsuiteOneColumn\":\"\",\"width\":100},\"translations\":[{\"language_code\":\"en\",\"label\":\"plugin\"}]}','2025-11-06 09:25:24','2025-11-06 09:25:24'),
    ('e19755a9-1add-476f-8e0c-b0db383bb01b','SitePluginLinks->type','field','{\"id\":\"e19755a9-1add-476f-8e0c-b0db383bb01b\",\"type\":\"field\",\"key\":\"list\",\"icon\":\"th-list\",\"isImported\":0,\"columnName\":\"type\",\"settings\":{\"showIcon\":1,\"required\":0,\"unique\":0,\"validationRules\":\"[]\",\"isMultiple\":0,\"hasColors\":0,\"default\":\"\",\"multipleDefault\":[],\"options\":[{\"id\":\"object\",\"text\":\"object\",\"hex\":\"#F44336\",\"translations\":[{\"language_code\":\"en\",\"text\":\"object\"}]},{\"id\":\"properties\",\"text\":\"properties\",\"hex\":\"#E91E63\",\"translations\":[{\"language_code\":\"en\",\"text\":\"properties\"}]},{\"id\":\"field\",\"text\":\"field\",\"hex\":\"#9C27B0\",\"translations\":[{\"language_code\":\"en\",\"text\":\"field\"}]},{\"id\":\"widget\",\"text\":\"widget\",\"hex\":\"#673AB7\",\"translations\":[{\"language_code\":\"en\",\"text\":\"widget\"}]}],\"width\":100},\"translations\":[{\"language_code\":\"en\",\"label\":\"type\"}]}','2025-11-06 09:03:17','2025-11-06 09:29:13'),
    ('10ca342d-db55-482d-9c4a-91f3e6a0c37c','SitePluginLinks->url','field','{\"id\":\"10ca342d-db55-482d-9c4a-91f3e6a0c37c\",\"type\":\"field\",\"key\":\"string\",\"icon\":\"font\",\"isImported\":0,\"columnName\":\"url\",\"settings\":{\"showIcon\":1,\"required\":0,\"unique\":0,\"validationRules\":\"[]\",\"default\":\"\",\"maxLength\":\"\",\"supportMultilingual\":0,\"width\":100},\"translations\":[{\"language_code\":\"en\",\"label\":\"url\"}]}','2025-11-06 09:24:34','2025-11-06 09:24:34'),
    ('13b24ff0-d6ed-43bd-9818-58afad34336b','Plugin Add.form.textbox','view','{\"id\":\"13b24ff0-d6ed-43bd-9818-58afad34336b\",\"type\":\"view\",\"key\":\"textbox\",\"icon\":\"i-cursor\",\"settings\":{\"type\":\"single\",\"objectId\":\"8a20528a-e472-4e80-911a-b14285425caf\",\"fieldId\":\"886a68ca-2b97-4f90-9ebf-4efd7f73dad5\",\"height\":0},\"accessLevels\":{},\"translations\":[{\"language_code\":\"en\",\"label\":\"Plugin Add.form.textbox\"}],\"viewIDs\":[],\"position\":{\"dx\":1,\"dy\":1,\"y\":0},\"isRoot\":false}','2025-11-07 03:21:26','2025-11-07 03:21:26'),
    ('97055885-1c12-4956-b668-a2311ef215f7','Plugin Add.form.textbox','view','{\"id\":\"97055885-1c12-4956-b668-a2311ef215f7\",\"type\":\"view\",\"key\":\"textbox\",\"icon\":\"i-cursor\",\"settings\":{\"type\":\"multiple\",\"objectId\":\"8a20528a-e472-4e80-911a-b14285425caf\",\"fieldId\":\"54212e74-7e57-4d6b-9d78-5e958a129697\",\"height\":0},\"accessLevels\":{},\"translations\":[{\"language_code\":\"en\",\"label\":\"Plugin Add.form.textbox\"}],\"viewIDs\":[],\"position\":{\"dx\":1,\"dy\":1,\"y\":1},\"isRoot\":false}','2025-11-07 03:21:26','2025-11-07 03:21:26'),
    ('07a1e706-5685-4ffb-9cdb-43118315f157','Plugin Add.form.textbox','view','{\"id\":\"07a1e706-5685-4ffb-9cdb-43118315f157\",\"type\":\"view\",\"key\":\"textbox\",\"icon\":\"i-cursor\",\"name\":\"Plugin Add.form.textbox\",\"settings\":{\"type\":\"single\",\"objectId\":\"8a20528a-e472-4e80-911a-b14285425caf\",\"fieldId\":\"b5cb8b98-34c1-4dd3-a43c-335106828c98\",\"height\":0},\"accessLevels\":{},\"translations\":[{\"language_code\":\"en\",\"label\":\"Plugin Add.form.textbox\"}],\"viewIDs\":[],\"position\":{\"dx\":1,\"dy\":1,\"y\":2,\"x\":0},\"isRoot\":false}','2025-11-07 07:41:17','2025-11-07 07:48:32'),
    ('80acfc8d-ffc7-4d01-b5da-912539a7734e','Plugin Add.form.textbox','view','{\"id\":\"80acfc8d-ffc7-4d01-b5da-912539a7734e\",\"type\":\"view\",\"key\":\"textbox\",\"icon\":\"i-cursor\",\"settings\":{\"type\":\"single\",\"objectId\":\"8a20528a-e472-4e80-911a-b14285425caf\",\"fieldId\":\"b5cb8b98-34c1-4dd3-a43c-335106828c98\",\"height\":0},\"accessLevels\":{},\"translations\":[{\"language_code\":\"en\",\"label\":\"Plugin Add.form.textbox\"}],\"viewIDs\":[],\"position\":{\"dx\":1,\"dy\":1,\"y\":2},\"isRoot\":false}','2025-11-07 03:21:26','2025-11-07 03:21:26'),
    ('d48cfa54-3aa3-41ba-b2b1-175db9ff98cc','Plugin Add.form.textbox','view','{\"id\":\"d48cfa54-3aa3-41ba-b2b1-175db9ff98cc\",\"type\":\"view\",\"key\":\"textbox\",\"icon\":\"i-cursor\",\"name\":\"Plugin Add.form.textbox\",\"settings\":{\"type\":\"single\",\"objectId\":\"8a20528a-e472-4e80-911a-b14285425caf\",\"fieldId\":\"b5cb8b98-34c1-4dd3-a43c-335106828c98\",\"height\":0},\"accessLevels\":{},\"translations\":[{\"language_code\":\"en\",\"label\":\"Plugin Add.form.textbox\"}],\"viewIDs\":[],\"position\":{\"dx\":1,\"dy\":1,\"y\":1,\"x\":0},\"isRoot\":false}','2025-11-07 07:31:49','2025-11-07 07:40:30'),
    ('b98d60d4-cab0-44bd-8dbe-05d18c72ae1a','Plugin Add.form.checkbox','view','{\"id\":\"b98d60d4-cab0-44bd-8dbe-05d18c72ae1a\",\"type\":\"view\",\"key\":\"checkbox\",\"icon\":\"check-square-o\",\"settings\":{\"objectId\":\"8a20528a-e472-4e80-911a-b14285425caf\",\"fieldId\":\"e5e111df-a082-40bc-bc55-f2277892169c\",\"height\":0},\"accessLevels\":{},\"translations\":[{\"language_code\":\"en\",\"label\":\"Plugin Add.form.checkbox\"}],\"viewIDs\":[],\"position\":{\"dx\":1,\"dy\":1,\"y\":3},\"isRoot\":false}','2025-11-07 03:21:26','2025-11-07 03:21:26'),
    ('4c3a2da0-fa28-40da-ac47-559345fe9224','Plugin Add.form.textbox','view','{\"id\":\"4c3a2da0-fa28-40da-ac47-559345fe9224\",\"type\":\"view\",\"key\":\"textbox\",\"icon\":\"i-cursor\",\"settings\":{\"type\":\"single\",\"objectId\":\"8a20528a-e472-4e80-911a-b14285425caf\",\"fieldId\":\"86f267b8-1d2e-4edc-a186-350e9c0bc27d\",\"height\":0},\"accessLevels\":{},\"translations\":[{\"language_code\":\"en\",\"label\":\"Plugin Add.form.textbox\"}],\"viewIDs\":[],\"position\":{\"dx\":1,\"dy\":1,\"y\":4},\"isRoot\":false}','2025-11-07 03:21:26','2025-11-07 03:21:26');

UNLOCK TABLES;

SET @app_json := (SELECT `json`
FROM appbuilder_definition
WHERE `id` = '227bcbb3-437f-4bb5-a5a1-ec3198696206'
LIMIT 1);

SET @app_object_ids := JSON_EXTRACT(@app_json, '$.json.objectIDs');

-- INSERT `SitePlugins` Object
SET @app_object_ids := JSON_ARRAY_INSERT(@app_object_ids, '$[0]', '8a20528a-e472-4e80-911a-b14285425caf');
-- INSERT `SitePluginLinks` Object
SET @app_object_ids := JSON_ARRAY_INSERT(@app_object_ids, '$[0]', '7ff322ff-3434-4611-9fd1-4d2996414c1a');
-- UPDATE `Site Administration` App to include new Objects
UPDATE `appbuilder_definition` SET `json` = JSON_SET(@app_json, '$.json.objectIDs', @app_object_ids) WHERE `id` = '227bcbb3-437f-4bb5-a5a1-ec3198696206';

DROP TABLE IF EXISTS `SITE_PLUGIN`;
CREATE TABLE `SITE_PLUGIN` (
  `uuid` varchar(255) NOT NULL,
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `properties` text DEFAULT NULL,
  `translations` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`translations`)),
  `url` varchar(255) DEFAULT NULL,
  `enabled` tinyint(1) DEFAULT NULL,
  `icon` varchar(255) DEFAULT NULL,
  `version` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`uuid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_unicode_ci;
LOCK TABLES `SITE_PLUGIN` WRITE;

DROP TABLE IF EXISTS `SITE_PLUGIN_LINK`;
CREATE TABLE `SITE_PLUGIN_LINK` (
  `uuid` varchar(255) NOT NULL,
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `properties` text DEFAULT NULL,
  `platform` varchar(255) DEFAULT NULL,
  `type` varchar(255) DEFAULT NULL,
  `url` varchar(255) DEFAULT NULL,
  `plugin` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`uuid`),
  KEY `SitePluginLinks_plugin` (`plugin`),
  CONSTRAINT `SitePluginLinks_plugin` FOREIGN KEY (`plugin`) REFERENCES `SITE_PLUGIN` (`uuid`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_unicode_ci;
LOCK TABLES `SITE_PLUGIN_LINK` WRITE;
